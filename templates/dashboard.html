<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="dashboard_title">SmartKids Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">

</head>

<body>
<div class="app-container">
    <aside class="sidebar" id="sidebar">
        <div class="logo-area">
            <div class="logo-container">
                <div class="logo-circle">
                    <img src="https://smk.bkt.net.vn/_next/image?url=%2Fbkt_logo.png&w=384&q=75" alt="Logo BKT">
                </div>
                <span class="role-badge" data-i18n="role_teacher">Teacher</span>
            </div>
        </div>

        <div class="toggle-btn" id="sidebarToggle">
            <i class="fas fa-chevron-left"></i>
        </div>

        <div class="user-profile">
            <div class="avatar-wrapper">
                <img src="https://smk.bkt.net.vn/_next/image?url=https%3A%2F%2Fstatic.edupia.vn%2Fimages%2Favata_system%2F55.png&w=256&q=75"
                     alt="User Avatar" class="avatar">
                <div class="edit-icon"><i class="fas fa-pencil-alt"></i></div>
            </div>
            <div class="user-email">{{ user_email }}</div>
        </div>

        <div class="festive-decoration">
            <div class="decoration-line">
                <i class="fas fa-holly-berry" style="color: #e74c3c;"></i>
                <i class="fas fa-dragon" style="color: #f1c40f; font-size: 24px;"></i>
                <i class="fas fa-holly-berry" style="color: #e74c3c;"></i>
            </div>
        </div>

        <nav class="nav-menu">

            <div class="overview-container">
                <a href="#" class="overview-btn active">
                    <div class="overview-icon">
                        <i class="fas fa-th-large"></i>
                    </div>
                    <span class="nav-text" data-i18n="overview">Overview</span>
                </a>
            </div>

            <div class="menu-list">
                <div class="menu-item has-dropdown">
                    <div class="menu-link" onclick="toggleDropdown(this)">
                        <div class="icon-box"><i class="fas fa-chalkboard-teacher"></i></div>
                        <span class="nav-text" data-i18n="class">Class</span>
                        <i class="fas fa-chevron-down arrow"></i>
                    </div>
                    <div class="submenu">
                        <a href="#" data-i18n="class_3_4">Class 3-4 years</a>
                        <a href="#" data-i18n="class_4_5">Class 4-5 years</a>
                        <a href="#" data-i18n="class_5_6">Class 5-6 years</a>
                    </div>
                </div>

                <div class="menu-item has-dropdown">
                    <div class="menu-link" onclick="toggleDropdown(this)">
                        <div class="icon-box"><i class="fas fa-chart-line"></i></div>
                        <span class="nav-text" data-i18n="teaching_progress">Teaching progress</span>
                        <i class="fas fa-chevron-down arrow"></i>
                    </div>
                    <div class="submenu">
                        <a href="#" data-i18n="lesson_completed">Lesson completed</a>
                        <a href="#" data-i18n="lessons_being_taught">Lessons being taught</a>
                    </div>
                </div>

                <div class="menu-item">
                    <a href="{{ url_for('set_teaching_mode') }}" class="menu-link">
                        <div class="icon-box"><i class="fas fa-sliders-h"></i></div>
                        <span class="nav-text" data-i18n="set_mode">Set teaching mode</span>
                    </a>
                </div>

                <div class="menu-item">
                    <a href="#" class="menu-link">
                        <div class="icon-box"><i class="fas fa-book"></i></div>
                        <span class="nav-text" data-i18n="material">Reference material</span>
                    </a>
                </div>

                <div class="menu-item">
                    <a href="#" class="menu-link">
                        <div class="icon-box"><i class="fas fa-users"></i></div>
                        <span class="nav-text" data-i18n="expert_team">Expert team</span>
                    </a>
                </div>

                <!--                <div class="menu-item">-->
                <!--                    <a href="#" class="menu-link">-->
                <!--                        <div class="icon-box"><i class="fas fa-cog"></i></div>-->
                <!--                        <span class="nav-text" data-i18n="settings">Settings</span>-->
                <!--                    </a>-->
                <!--                </div>-->
            </div>
        </nav>

        <div class="mascot-area">
            <div class="notification-icon">
                <img src="https://smk.bkt.net.vn/_next/image?url=%2Fassets%2Fimage%2Fnotification.webp&w=640&q=85"
                     alt="Notification" class="notification-img">
            </div>

            <img src="https://smk.bkt.net.vn/_next/image?url=%2Fassets%2Fimage%2Fbkt_mascot.webp&w=640&q=85"
                 alt="Mascot" class="penguin-img">
        </div>
    </aside>

    <main class="main-content">
        <header class="top-header">
            <div class="banner-container">
                <div class="banner-text" data-i18n="smartkids_2025">SmartKids 2025</div>
            </div>
            <div class="header-controls">
                <div class="control-group">
                    <button class="btn-primary" onclick="window.location.href='{{ url_for('gioithieu') }}'">
                        <i class="fas fa-home"></i> Homepage
                    </button>

                    <div class="lang-toggle">
                        <img src="https://flagcdn.com/w40/gb.png" alt="UK Flag" class="flag">
                        <span>English</span>
                        <div class="toggle-switch"></div>
                    </div>
                    <button class="btn-logout" data-i18n="theme">
                        <i class="fas fa-sign-out-alt"></i> Theme
                    </button>
                </div>
                <div class="control-group bottom-row">
                    <a href="{{ url_for('set_teaching_mode') }}" class="bkt-default-link">
                        <div class="bkt-default">
                            <span class="badge">bkt</span> <span data-i18n="default_label">Default</span>
                        </div>
                    </a>
                    <a href="{{ url_for('logout') }}" class="btn-logout" data-i18n="logout">>
                        <i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t
                    </a>
                </div>
            </div>

        </header>

        <div class="dashboard-content">

            <div class="course-card">
                <div class="card-header">
                    <div class="class-title">
                        <div class="class-icon"><i class="fas fa-users"></i></div>
                        <h3 data-i18n="class_5_6s">Class 5‚Äì6 years</h3>
                    </div>
                    <div class="class-stats">
                        <div class="stat-item">
                            <span class="stat-val">0</span>
                            <span class="stat-label" data-i18n="completed">Completed</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-val">70</span>
                            <span class="stat-label" data-i18n="total_lessons">Total lessons</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-val">0%</span>
                            <span class="stat-label" data-i18n="progress">Progress</span>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="lesson-column left">
                        <div class="column-header">
                            <div class="icon-box"><i class="fas fa-chalkboard"></i></div>
                            <div>
                                <h4 data-i18n="lesson_being_taught">Lesson being taught</h4>
                                <p data-i18n="current_lecture">Current lecture</p>
                            </div>
                        </div>
                        <div class="empty-state">
                            <div class="empty-icon-circle">
                                <i class="fas fa-child"></i>
                            </div>
                            <h5 data-i18n="no_lessons">No lessons yet</h5>
                            <p data-i18n="start_new">Start a new lesson</p>
                        </div>
                    </div>
                    <div class="lesson-column right">
                        <div class="column-header">
                            <div class="icon-box"><i class="fas fa-rocket"></i></div>
                            <div>
                                <h4 data-i18n="next_lesson">Next lesson</h4>
                                <p data-i18n="upcoming_lecture">Upcoming lecture</p>
                            </div>
                        </div>
                        <div class="lesson-preview-card">
                            <div class="preview-header" data-i18n="unit_1_new_friends">Unit 1: New Friends</div>
                            <div class="preview-image">
                                <img src="/static/images/thumb_friends.png" alt="New Friends">
                                <div class="speech-bubbles">
                                    <span class="bubble b1">Hi!</span>
                                    <span class="bubble b2">HELLO!</span>
                                    <span class="bubble b3">Hi!</span>
                                </div>
                            </div>
                            <div class="preview-info">
                                <div class="info-row">
                                    <span data-i18n="week_1">Week 1</span>
                                    <!--<span data-i18n="class_5_6s">Class 5-6 years</span>-->
                                </div>
                                <div class="lesson-title" data-i18n="lesson_title_01">LESSON 1 - LET'S
                                    LISTEN
                                </div>
                            </div>
                            <div class="preview-actions">
                                <button class="btn-check" data-i18n="check_now">Check now</button>
                                <div class="likes"><i class="fas fa-heart"></i> 2.8k</div>
                            </div>
                        </div>
                        <div class="show-all" data-i18n="all_lessons_shown">All lessons shown</div>
                    </div>
                </div>
            </div>

        </div>
    </main>
    <div class="modal-backdrop" id="themeModalBackdrop">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <span class="bkt-logo-text">bkt</span> SmartKid
                </h2>
                <button class="close-btn" id="closeThemeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="modal-body">
                <p class="modal-description">
                    Thay ƒë·ªïi m√†u n·ªÅn SmartKid <span class="mascot-icon">üëß</span>
                </p>

                <div class="theme-selector">
                    <div class="theme-options">
                        <div class="theme-option" data-color="yellow">
                            <i class="fas fa-star" style="color: #f1c40f;"></i>
                        </div>
                        <div class="theme-option selected" data-color="blue">
                            <i class="fas fa-star" style="color: #3498db;"></i>
                        </div>
                        <div class="theme-option" data-color="pink">
                            <i class="fas fa-star" style="color: #e74c3c;"></i>
                        </div>
                        <div class="theme-option" data-color="red">
                            <i class="fas fa-star" style="color: #c0392b;"></i>
                        </div>
                    </div>

                    <div class="festive-mascots">
                        <img src="https://static.edupia.vn/images/avata_system/55.png" alt="Mascot"
                             class="kid-mascot left">
                        <img src="https://static.edupia.vn/images/avata_system/55.png" alt="Mascot"
                             class="kid-mascot right">
                    </div>

                    <div class="color-preview-area">
                        <div class="color-preview-star" id="previewStar">
                            <i class="fas fa-star" style="color: #3498db;"></i>
                            <span class="tiger-deco left">üêÖ</span>
                            <span class="tiger-deco right">üêÖ</span>
                        </div>
                        <div class="color-input-display">
                            <div class="input-display-box" id="selectedColorDisplay"></div>
                        </div>
                        <button class="btn-change-theme" data-i18n="change_theme">Thay ƒë·ªïi</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='lang/lang_en.js') }}"></script>
<script src="{{ url_for('static', filename='lang/lang_vi.js') }}"></script>

<!-- Load JS ch√≠nh sau khi c√≥ LANG_EN / LANG_VI -->
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>

<!--<script src="/assets/lang/lang_en.js"></script>-->
<!--<script src="/assets/lang/lang_vi.js"></script>-->
<!--<script src="/assets/js/dashboard.js"></script>-->
<script>
    document.addEventListener('DOMContentLoaded', function() {

        // ... (Ph·∫ßn Sidebar Toggle, Dropdown Menu, Language Toggle gi·ªØ nguy√™n) ...

        // 1. L·∫•y c√°c ph·∫ßn t·ª≠
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');

        // 2. X·ª≠ l√Ω Sidebar Toggle
        sidebarToggle.addEventListener('click', () => {
    sidebar.classList.toggle('collapsed');

    const icon = sidebarToggle.querySelector('i');

    if (sidebar.classList.contains('collapsed')) {
        icon.classList.remove('fa-chevron-left');
        icon.classList.add('fa-chevron-right');
    } else {
        icon.classList.remove('fa-chevron-right');
        icon.classList.add('fa-chevron-left');
    }
});


        // 3. Dropdown Menu
        window.toggleDropdown = function(element) {
            if (sidebar.classList.contains('collapsed')) {
                sidebar.classList.remove('collapsed');
                setTimeout(() => {
                    element.parentElement.classList.toggle('active');
                }, 100);
            } else {
                element.parentElement.classList.toggle('active');
            }
        };

        /* =============================== */
        /* 4. Language Toggle + Load File   */
        /* =============================== */

        const langToggle = document.querySelector('.lang-toggle');
        const langText = langToggle.querySelector('span');
        const langFlag = langToggle.querySelector('img');
        let currentLang = "en"; // Bi·∫øn l∆∞u ng√¥n ng·ªØ hi·ªán t·∫°i

        function applyLanguage(langData) {
            const htmlKeys = ['homepage', 'theme', 'logout'];

            for (const key in langData) {
                const elements = document.querySelectorAll(`[data-i18n="${key}"]`);

                elements.forEach(el => {
                    if (htmlKeys.includes(key)) {
                        el.innerHTML = langData[key];
                    } else {
                        el.textContent = langData[key];
                    }
                });
            }
        }

        langToggle.addEventListener('click', () => {
            langToggle.classList.toggle('active');

            if (currentLang === "en") {
                currentLang = "vi";
                langText.textContent = "Ti·∫øng Vi·ªát";
                langFlag.src = "https://flagcdn.com/w40/vn.png";
                applyLanguage(LANG_VI);
            } else {
                currentLang = "en";
                langText.textContent = "English";
                langFlag.src = "https://flagcdn.com/w40/gb.png";
                applyLanguage(LANG_EN);
            }
        });

        // Kh·ªüi t·∫°o ng√¥n ng·ªØ
        applyLanguage(LANG_EN);

        /* =============================== */
        /* 5. Modal Logic (Theme Selector)  */
        /* =============================== */

        const themeButton = document.querySelector('.btn-logout[data-i18n="theme"]');
        const modalBackdrop = document.getElementById('themeModalBackdrop');
        const closeModalButton = document.getElementById('closeThemeModal');
        const themeOptions = document.querySelectorAll('.theme-option');
        const selectedColorDisplay = document.getElementById('selectedColorDisplay');
        const previewStar = document.getElementById('previewStar');

        // H√†m m·ªü Modal
        function openThemeModal() {
            modalBackdrop.classList.add('show');
        }

        // H√†m ƒë√≥ng Modal
        function closeThemeModal() {
            modalBackdrop.classList.remove('show');
        }

        // 5.1. B·∫≠t/T·∫Øt Modal
        themeButton.addEventListener('click', openThemeModal);
        closeModalButton.addEventListener('click', closeThemeModal);

        // ƒê√≥ng Modal khi click ra ngo√†i
        modalBackdrop.addEventListener('click', (e) => {
            if (e.target === modalBackdrop) {
                closeThemeModal();
            }
        });

        // 5.2. Logic ch·ªçn m√†u
        themeOptions.forEach(option => {
            option.addEventListener('click', function() {
                // X√≥a tr·∫°ng th√°i selected kh·ªèi t·∫•t c·∫£
                themeOptions.forEach(opt => opt.classList.remove('selected'));

                // Th√™m tr·∫°ng th√°i selected cho option hi·ªán t·∫°i
                this.classList.add('selected');

                const selectedColorName = this.getAttribute('data-color');
                const selectedColorValue = this.querySelector('i').style.color;

                // C·∫≠p nh·∫≠t √¥ input/preview
                selectedColorDisplay.style.backgroundColor = selectedColorValue;

                // C·∫≠p nh·∫≠t ng√¥i sao preview
                previewStar.querySelector('i').style.color = selectedColorValue;
            });
        });

        // Kh·ªüi t·∫°o tr·∫°ng th√°i m·∫∑c ƒë·ªãnh (Xanh d∆∞∆°ng)
        const defaultColor = themeOptions[1].getAttribute('data-color');
        const defaultColorValue = themeOptions[1].querySelector('i').style.color;
        selectedColorDisplay.style.backgroundColor = defaultColorValue;
        previewStar.querySelector('i').style.color = defaultColorValue;

    });
</script>
</body>
</html>
